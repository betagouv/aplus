@import scala.collection.immutable.ListMap
@import java.util.UUID

@import _root_.helper.{Math, Time}
@(isAdmin: Boolean)(data: views.stats.StatsData, months: ListMap[String, String], users: List[User], groups: List[UserGroup], selectedAreaIds: List[UUID], selectedOrganisationIds: List[Organisation.Id], selectedGroupIds: List[UUID])(implicit webJarsUtil: org.webjars.play.WebJarsUtil)



    <div class="mdl-cell mdl-cell--12-col">
    <br><span>Dernière mise à jour : @{Time.formatPatternFr(Time.nowParis(), "dd MMM YYYY - HH:mm:ss")}</span>
    </div>

    <!-- New Stats -->
    <div class="mdl-cell mdl-cell--6-col mdl-shadow--2dp mdl-color--white typography--text-align-center">
        <h6>Total de demandes</h6>
        <h1>@data.allApplications.size</h1>
        <h5>@data.allApplications.count(_.ageInDays <= 30) sur les 30 derniers jours</h5>
    </div>
    <div class="mdl-cell mdl-cell--6-col mdl-shadow--2dp mdl-color--white typography--text-align-center">
        <h6>Total d'utilisateurs</h6>
        <h1>@users.length</h1>
        <h5>@users.count(_.ageInDays <= 30) sur les 30 derniers jours</h5>
    </div>
    <div class="mdl-cell mdl-cell--6-col mdl-shadow--2dp mdl-color--white typography--text-align-center">
        <h6>Répartition des demandes</h6>
        <canvas id="applications-status-chart" class="chart--default-size"></canvas>
        <script>
                new Chart(document.getElementById('applications-status-chart'), {
                    type: 'pie',

                    // The data for our dataset
                    data: {
                        labels: [@Html(data.allApplications.groupBy(_.status).map(s => s"'${s._1} (${s._2.size})'").mkString(", "))],
                        datasets: [{
                            label: "Status",
                            data: [@Html(data.allApplications.groupBy(_.status).map(_._2.size).mkString(", "))],
                            backgroundColor: [
                                "rgba(61, 149, 236, 1)",
                                "rgba(113, 176, 239, 1)",
                                "rgba(191, 220, 249, 1)",
                                "rgba(222, 238, 265, 1)",
                            ]
                        }]
                    },

                    // Configuration options go here
                    options: {
                        tooltips: {
                            mode: 'index',
                            intersect: false
                        },
                        responsive: true
                    }
                });
        </script>
        <h5>@data.allApplications.count(a => a.ageInDays <= 30 && a.closed) clôturé sur les 30 derniers jours</h5>
    </div>
    <div class="mdl-cell mdl-cell--6-col mdl-shadow--2dp mdl-color--white typography--text-align-center">
        <h6>Pertinences des demandes</h6>
        <canvas id="applications-relevant-chart" class="chart--default-size"></canvas>
        <script>
                new Chart(document.getElementById('applications-relevant-chart'), {
                    type: 'pie',

                    // The data for our dataset
                    data: {
                        labels: ['Pertinente', 'Non Pertinente'],
                        datasets: [{
                            label: "Status",
                            data: [@data.allApplications.count(!_.irrelevant),@data.allApplications.count(_.irrelevant)],
                            backgroundColor: [
                                "rgba(61, 149, 236, 1)",
                                "red"
                            ]
                        }]
                    },

                    // Configuration options go here
                    options: {
                        tooltips: {
                            mode: 'index',
                            intersect: false
                        },
                        responsive: true
                    }
                });
        </script>
        <h5>@data.allApplications.count(a => a.ageInDays <= 30 && a.irrelevant) non pertinente sur les 30 derniers jours</h5>
    </div>

            <div class="mdl-cell mdl-cell--12-col mdl-shadow--2dp mdl-color--white typography--text-align-center">
                <h6>Est-ce que la réponse vous semble utile pour l'usager ?</h6>
                <canvas id="satisfaction-chart" class="chart--default-size"></canvas>
                <script>
                        new Chart(document.getElementById('satisfaction-chart'), {
                            type: 'bar',

                            // The data for our dataset
                            data: {
                                labels: [@Html(data.applicationsGroupByMonthsClosed.map(s => s"'${s._1}'").mkString(", "))],
                                datasets: [{
                                    data: [@Html(data.applicationsGroupByMonthsClosed.map(a => if(a._2.count(_.usefulness.isDefined) == 0) { 0 } else { (a._2.count(_.usefulness.contains("Non"))*100)/a._2.count(_.usefulness.isDefined) }).mkString(", "))],
                                    label: "Non",
                                    backgroundColor: "red",
                                    borderColor: "red",
                                    stack: 'useful',
                                    fill: false
                                }, {
                                    data: [@Html(data.applicationsGroupByMonthsClosed.map(a => if(a._2.count(_.usefulness.isDefined) == 0) { 0 } else { (a._2.count(_.usefulness.contains("Je ne sais pas"))*100)/a._2.count(_.usefulness.isDefined) }).mkString(", "))],
                                    label: "Je ne sais pas",
                                    backgroundColor: "orange",
                                    borderColor: "orange",
                                    stack: 'useful',
                                    fill: false
                                }, {
                                    data: [@Html(data.applicationsGroupByMonthsClosed.map(a => if(a._2.count(_.usefulness.isDefined) == 0) { 0 } else { (a._2.count(_.usefulness.contains("Oui"))*100)/a._2.count(_.usefulness.isDefined) }).mkString(", "))],
                                    label: 'Oui',
                                    backgroundColor: "green",
                                    borderColor: "green",
                                    stack: 'useful',
                                    fill: false
                                }]
                            },

                            // Configuration options go here
                            options: {
                                scaleLabel: "<%=value%>%",
                                tooltips: {
                                    mode: 'index',
                                    intersect: false,
                                    callbacks: {
                                        label: (item) => item.yLabel + " %",
                                },
                            },
                            responsive: true,
                        }
                    });
                </script>
            </div>

            <div class="mdl-cell mdl-cell--12-col mdl-shadow--2dp mdl-color--white typography--text-align-center">
                <h6>Temps de résolution</h6>
                <canvas id="resolution-time-chart" class="chart--default-size"></canvas>
                <script>
                        new Chart(document.getElementById('resolution-time-chart'), {
                            type: 'bar',

                            // The data for our dataset
                            data: {
                                labels: [@Html(data.applicationsGroupByMonthsClosed.map(s => s"'${s._1}'").mkString(", "))],
                                datasets: [{
                                    data: [@Html(data.applicationsGroupByMonthsClosed.map{ apps =>
                                        if(apps._2.isEmpty) {
                                           0D
                                        } else {
                                           val resolutionTimes = apps._2.flatMap(_.resolutionTimeInMinutes).map(_.toDouble)
                                           Math.median(resolutionTimes)/24D / 60D
                                        }
                                    }.mkString(", "))],
                                    label: "Temps de résolution median (Jour)",
                                    backgroundColor: "black",
                                    type: 'line',
                                    borderColor: "black",
                                    fill: false
                                }, {
                                    data: [@Html(data.applicationsGroupByMonthsClosed.map{ apps =>
                                        if(apps._2.isEmpty) {
                                           0D
                                        } else {
                                           val resolutionTimes = apps._2.flatMap(_.resolutionTimeInMinutes)
                                           resolutionTimes.sum.toDouble / resolutionTimes.size.toDouble / 24D / 60D
                                        }
                                    }.mkString(", "))],
                                    label: "Temps de résolution moyen (Jour)",
                                    backgroundColor: "rgba(113, 176, 239, 1)"
                                }, {
                                    data: [@Html(data.applicationsGroupByMonthsClosed.map{ apps =>
                                        if(apps._2.isEmpty) {
                                           0D
                                        } else {
                                           val resolutionTimes = apps._2.flatMap(_.firstAnswerTimeInMinutes)
                                           resolutionTimes.sum.toDouble / resolutionTimes.size.toDouble / 24D / 60D
                                        }
                                    }.mkString(", "))],
                                    label: "Temps pour la première réponse moyen (Jour)",
                                    backgroundColor: "Blue"
                                },
                                ]
                            },

                            // Configuration options go here
                            options: {
                                tooltips: {
                                    mode: 'index',
                                    intersect: false
                                },
                                scales: {
                                    yAxes: [{
                                        ticks: {
                                            beginAtZero: true
                                        }
                                    }]
                                },
                                responsive: true
                            }
                        });
                </script>
            </div>

            <div class="mdl-cell mdl-cell--12-col mdl-shadow--2dp mdl-color--white typography--text-align-center">
                <h6>Demandes déposés</h6>
                <canvas id="new-applications-chart" class="chart--default-size"></canvas>
                <script>
                        var adminReceivedColors = ["#caff70","#caff70","#8b8970","#8b8970","#a2cd5a","#a2cd5a","#eea2ad","#eea2ad","#666666","#666666","#7a7a7a","#7a7a7a","#87ceff","#87ceff","#6ca6cd","#6ca6cd","#eedd82","#eedd82","#ee6a50","#ee6a50","#ee7942","#ee7942","#ff83fa","#ff83fa","#c9c9c9","#c9c9c9","#919191","#919191","#cd5c5c","#cd5c5c","#454545","#454545","#eee9bf","#eee9bf",];

                        new Chart(document.getElementById('new-applications-chart'), {
                            type: 'line',

                            // The data for our dataset
                            data: {
                                labels: [@Html(data.applicationsGroupByMonths.map(s => s"'${s._1}'").mkString(", "))],
                                datasets: [@for(areaData <- data.areaAggregates) {
                                        {
                                            label: "@areaData.area.name",
                                            lineTension: 0,
                                            borderColor: adminReceivedColors.pop(),
                                            backgroundColor: adminReceivedColors.pop(),
                                            data: [@Html(data.applicationsGroupByMonths.map(_._2.count(_.area == areaData.area.id)).mkString(", "))]
                                        },
                                    }]
                            },

                            // Configuration options go here
                            options: {
                                tooltips: {
                                    mode: 'index',
                                    intersect: false
                                },
                                scales: {
                                    yAxes: [{
                                        stacked: true,
                                        beginAtZero: true,
                                        scaleLabel: {
                                            display: true,
                                            labelString: 'Value'
                                        }
                                    }]
                                },
                                responsive: true
                            }
                        });
                </script>
            </div>
            <div class="mdl-cell mdl-cell--12-col mdl-shadow--2dp mdl-color--white typography--text-align-center">
                <h6>Demandes clôturé</h6>
                <canvas id="closed-applications-chart" class="chart--default-size"></canvas>
                <script>
                        new Chart(document.getElementById('closed-applications-chart'), {
                            type: 'bar',

                            // The data for our dataset
                            data: {
                                labels: [@Html(data.applicationsGroupByMonths.map(s => s"'${s._1}'").mkString(", "))],
                                datasets: [{
                                    data: [@Html(data.applicationsGroupByMonthsClosed.map(_._2.count(_.closed)).mkString(", "))],
                                    label: "Demandes clôturées",
                                    backgroundColor: "black",
                                    type: 'line',
                                    borderColor: "black",
                                    fill: false
                                }]
                            },

                            // Configuration options go here
                            options: {
                                tooltips: {
                                    mode: 'index',
                                    intersect: false
                                },
                                scales: {
                                    yAxes: [{
                                        ticks: {
                                            beginAtZero: true
                                        }
                                    }]
                                },
                                responsive: true
                            }
                        });
                </script>
            </div>
                @if(isAdmin) {
            <div class="mdl-cell mdl-cell--12-col mdl-shadow--2dp mdl-color--white typography--text-align-center">
                <h6>Demande par administration réceptrice (Beta)</h6>
                <canvas id="applications-per-admin-chart" class="chart--500px-height"></canvas>
                <script>

                        var adminReceivedColors = ["#caff70","#8b8970","#a2cd5a","#eea2ad","#666666","#7a7a7a","#87ceff","#6ca6cd","#eedd82","#ee6a50","#ee7942","#ff83fa","#c9c9c9","#919191","#cd5c5c","#454545","#eee9bf",];
                        @defining(data.applicationsGroupByMonths.flatMap(_._2).flatMap(_.administrations(users)).toSet.toList) { admins =>
                            new Chart(document.getElementById('applications-per-admin-chart'), {
                                type: 'pie',
                                // The data for our dataset
                                data: {
                                    labels: [@Html(admins.map(a => s"'${a.replaceAll("'", "`")}'").mkString(", "))],
                                    datasets: [
                                            {
                                                label: "Demandes",
                                                fill: false,
                                                backgroundColor: [
                                                    @for(admin: String <- admins) {
                                                         adminReceivedColors.pop(),
                                                    }
                                                ],
                                                lineTension: 0,
                                                data: [@admins.map(admin => data.allApplications.count(_.administrations(users).contains(admin))).mkString(",")]
                                            },
                                    ]
                                },

                                // Configuration options go here
                                options: {
                                    tooltips: {
                                        mode: 'index',
                                        intersect: false
                                    },
                                    responsive: true
                                }
                            });
                        }
                </script>
            </div>
                }

    @if(isAdmin) {
    <!-- all -->
    <div class="mdl-cell mdl-cell--12-col mdl-grid--no-spacing mdl-shadow--2dp mdl-color--white">
        <h6>Demandes par territoire</h6>
        <div class="mdl-cell mdl-cell--12-col mdl-grid">
        @defining(data.allApplications.flatMap(_.administrations(users)).toSet.toList) { admins =>
            <table class="mdl-data-table mdl-data-table--initial-white-space mdl-js-data-table pem-table mdl-data-table--normal-white-space">
                <thead>
                    <tr>
                        <th class="mdl-data-table__cell--non-numeric">Territoire</th>
                        <th>Total</th>
                        <th>Total clôturé</th>
                        <th>Total Non Pertinente</th>
                        <th><img class="usefulness__icon" src="@webJarsUtil.locate("1f600.svg").url.get"> Oui</th>
                        <th><img class="usefulness__icon" src="@webJarsUtil.locate("1f610.svg").url.get"> Je ne sais pas</th>
                        <th><img class="usefulness__icon" src="@webJarsUtil.locate("1f61e.svg").url.get"> Non</th>
                        <th>?</th>
                    </tr>
                </thead>
                <tbody>
                    @for(areaData <- data.areaAggregates) {
                        <tr class="application-row">
                            <td class="mdl-data-table__cell--non-numeric">@areaData.area.name</td>
                            <td>@areaData.applications.length</td>
                            <td>@areaData.applications.count(_.closed)</td>
                            <td>@areaData.applications.count(_.irrelevant)</td>
                            <td>@areaData.applications.count(_.usefulness.contains("Oui")) <img class="usefulness__icon" src="@webJarsUtil.locate("1f600.svg").url.get"></td>
                            <td>@areaData.applications.count(_.usefulness.contains("Je ne sais pas")) <img class="usefulness__icon" src="@webJarsUtil.locate("1f610.svg").url.get"></td>
                            <td>@areaData.applications.count(_.usefulness.contains("Non")) <img class="usefulness__icon" src="@webJarsUtil.locate("1f61e.svg").url.get"></td>
                            <td>@areaData.applications.count(_.usefulness.isEmpty) ?</td>
                        </tr>
                    }
                </tbody>
            </table>
        }
        </div>
    </div>

    <!-- Old Stats -->
    <div class="mdl-cell mdl-cell--12-col mdl-grid--no-spacing">
        @for(areaData <- data.areaAggregates) {
            <h4 class="mdl-cell mdl-cell--12-col">@areaData.area.name</h4>
                <div class="mdl-cell mdl-cell--12-col mdl-shadow--2dp mdl-color--white mdl-grid">
                    <canvas class="mdl-cell mdl-cell--12-col chart--default-size" id="application-chart-@areaData.area.id"></canvas>
                    <script>
                        new Chart(document.getElementById('application-chart-@areaData.area.id'), {
                            // The type of chart we want to create
                            type: 'bar',

                            // The data for our dataset
                            data: {
                                labels: [@Html(areaData.newApplicationsPerMonth.map(_._1).flatMap(months.get).map(day => s"'$day'").mkString(", "))],
                                datasets: [{
                                    label: "Nouvelles demandes",
                                    backgroundColor: '#3f51b5',
                                    borderColor: '#3f51b5',
                                    stack: 'new',
                                    data: [@Html(areaData.newApplicationsPerMonth.map(_._2.length).mkString(", "))]
                                }, {
                                    label: "Demandes clôturées non évalué",
                                    backgroundColor: 'gray',
                                    borderColor: 'gray',
                                    stack: 'useful',
                                    data: [@Html(areaData.closedApplicationsPerMonth.map(_._2.count(_.usefulness.isEmpty)).mkString(", "))],
                                },{
                                    label: "Demandes clôturées non utiles",
                                    backgroundColor: 'orange',
                                    borderColor: 'orange',
                                    stack: 'useful',
                                    data: [@Html(areaData.closedApplicationsPerMonth.map(_._2.count(_.usefulness.contains("Non"))).mkString(", "))],
                                }, {
                                    label: "Demandes clôturées utilité inconnue",
                                    backgroundColor: 'yellow',
                                    borderColor: 'yellow',
                                    stack: 'useful',
                                    data: [@Html(areaData.closedApplicationsPerMonth.map(_._2.count(_.usefulness.contains("Je ne sais pas"))).mkString(", "))],
                                },{
                                    label: "Demandes clôturées utiles",
                                    backgroundColor: 'green',
                                    borderColor: 'green',
                                    stack: 'useful',
                                    data: [@Html(areaData.closedApplicationsPerMonth.map(_._2.count(_.usefulness.contains("Oui"))).mkString(", "))]
                                }, {
                                    label: "Demandes clôturées non pertinentes",
                                    backgroundColor: 'red',
                                    borderColor: 'red',
                                    stack: 'irrelevant',
                                    data: [@Html(areaData.closedApplicationsPerMonth.map(_._2.count(_.irrelevant)).mkString(", "))]
                                }]
                            },

                            // Configuration options go here
                            options: {
                                tooltips: {
                                    mode: 'index',
                                    intersect: false
                                },
                                responsive: true,
                                scales: {
                                    xAxes: [{
                                        stacked: true,
                                    }],
                                    yAxes: [{
                                        stacked: true,
                                        ticks: {"beginAtZero":true, fixedStepSize: 1}
                                    }]
                                }
                            }
                        });
                    </script>
                    <details class="mdl-cell mdl-cell--12-col">
                        <summary>Détail des demandes reçues par les instructeurs d'administrations </summary>

                        @defining(areaData.newApplicationsPerMonth.flatMap(_._2).flatMap(_.administrations(users)).toSet.toList) { admins =>
                            <div class="chart-container">
                                <canvas id="admin-received-chart-@areaData.area.id"></canvas>
                            </div>
                            <script>
                                    var adminReceivedColors = ["#caff70","#caff70","#8b8970","#8b8970","#a2cd5a","#a2cd5a","#eea2ad","#eea2ad","#666666","#666666","#7a7a7a","#7a7a7a","#87ceff","#87ceff","#6ca6cd","#6ca6cd","#eedd82","#eedd82","#ee6a50","#ee6a50","#ee7942","#ee7942","#ff83fa","#ff83fa","#c9c9c9","#c9c9c9","#919191","#919191","#cd5c5c","#cd5c5c","#454545","#454545","#eee9bf","#eee9bf",];
                                    new Chart(document.getElementById('admin-received-chart-@areaData.area.id'), {
                                        // The type of chart we want to create
                                        type: 'line',
                                        // The data for our dataset
                                        data: {
                                            labels: [@Html(areaData.newApplicationsPerMonth.map(_._1).flatMap(months.get).map(day => s"'$day'").mkString(", "))],
                                            datasets: [
                                                @for(admin: String <- admins) {
                                                {
                                                    label: "@Html(admin)",
                                                    fill: false,
                                                    borderColor: adminReceivedColors.pop(),
                                                    backgroundColor: adminReceivedColors.pop(),
                                                    lineTension: 0,
                                                    data: [@Html(areaData.newApplicationsPerMonth.map(_._2.count(_.administrations(users).contains(admin))).mkString(", "))]
                                                },
                                                }
                                            ]
                                        },

                                        // Configuration options go here
                                        options: {
                                            maintainAspectRatio: false,
                                            "scales":{
                                                yAxes: [{
                                                    ticks: {"beginAtZero":true,fixedStepSize: 1}
                                                }]
                                            }
                                        }
                                    });
                            </script>
                            <table class="mdl-data-table mdl-data-table--initial-white-space  mdl-js-data-table mdl-cell mdl-cell--12-col">
                                        <thead>
                                            <tr>
                                                <th class="mdl-data-table__cell--non-numeric">Semaine</th>
                                                <th>Nouvelle</th>
                                                @for(admin: String <- admins) {
                                                    <th>@admin</th>
                                                }
                                                </tr>
                                        </thead>
                                        <tbody>
                                        @for((month, applications) <- areaData.newApplicationsPerMonth.reverse) {
                                            <tr class="application-row">
                                                <td class="mdl-data-table__cell--non-numeric">@months(month) (@month)</td>
                                                <td>@applications.length</td>
                                                @for(admin: String <- admins) {
                                                    <td>@applications.count(_.administrations(users).contains(admin))</td>
                                                }
                                            </tr>
                                        }
                                        </tbody>

                            </table>
                        }
                    </details>
                    <details class="mdl-cell mdl-cell--12-col">
                        <summary>Détail des demandes faites par des structures aidantes</summary>
                        @defining(areaData.newApplicationsPerMonth.flatMap(_._2).flatMap(_.creatorUserQualite(users)).toSet.toList) { admins =>
                        <div class="chart-container">
                            <canvas id="helper-admin-chart-@areaData.area.id"></canvas>
                        </div>
                        <script>
                                var adminReceivedColors = ["#caff70","#caff70","#8b8970","#8b8970","#a2cd5a","#a2cd5a","#eea2ad","#eea2ad","#666666","#666666","#7a7a7a","#7a7a7a","#87ceff","#87ceff","#6ca6cd","#6ca6cd","#eedd82","#eedd82","#ee6a50","#ee6a50","#ee7942","#ee7942","#ff83fa","#ff83fa","#c9c9c9","#c9c9c9","#919191","#919191","#cd5c5c","#cd5c5c","#454545","#454545","#eee9bf","#eee9bf",];
                                new Chart(document.getElementById('helper-admin-chart-@areaData.area.id'), {
                                    // The type of chart we want to create
                                    type: 'line',
                                    // The data for our dataset
                                    data: {
                                        labels: [@Html(areaData.newApplicationsPerMonth.map(_._1).flatMap(months.get).map(day => s"'$day'").mkString(", "))],
                                        datasets: [
                                            @for(admin: String <- admins) {
                                            {
                                                label: "@Html(admin)",
                                                fill: false,
                                                lineTension: 0,
                                                borderColor: adminReceivedColors.pop(),
                                                backgroundColor: adminReceivedColors.pop(),
                                                data: [@Html(areaData.newApplicationsPerMonth.map(_._2.count(_.creatorUserQualite(users).contains(admin))).mkString(", "))]
                                            },
                                            }
                                        ]
                                    },

                                    // Configuration options go here
                                    options: {
                                        maintainAspectRatio: false,
                                        responsive: true,
                                        "scales":{
                                            yAxes: [{
                                                ticks: {"beginAtZero":true, fixedStepSize: 1}
                                            }]
                                        }
                                    }
                                });
                        </script>
                        <table class="mdl-data-table mdl-data-table--initial-white-space  mdl-js-data-table mdl-cell mdl-cell--12-col">
                            <thead>
                                <tr>
                                    <th class="mdl-data-table__cell--non-numeric">Semaine</th>
                                    <th>Nouvelle</th>
                                    @for(admin: String <- admins) {
                                        <th>@admin</th>
                                    }
                                    </tr>
                            </thead>
                            <tbody>
                            @for((month, applications) <- areaData.newApplicationsPerMonth.reverse) {
                                <tr class="application-row">
                                    <td class="mdl-data-table__cell--non-numeric">@months(month) (@month)</td>
                                    <td>@applications.length</td>
                                    @for(admin: String <- admins) {
                                        <td>@applications.count(_.creatorUserQualite(users).contains(admin))</td>
                                    }
                                </tr>
                            }
                            </tbody>
                        </table>
                        }
                    </details>
                   <details class="mdl-cell mdl-cell--12-col">
                    <summary>Détail des demandes clôturées</summary>
                    <table class="mdl-data-table mdl-data-table--initial-white-space  mdl-js-data-table mdl-cell mdl-cell--12-col">
                    <thead>
                        <tr>
                            <th class="mdl-data-table__cell--non-numeric">Semaine</th>
                            <th>Clôturé</th>
                            <th>Non Pertinente</th>
                            <th><img class="usefulness__icon" src="@webJarsUtil.locate("1f600.svg").url.get"> Oui</th>
                            <th><img class="usefulness__icon" src="@webJarsUtil.locate("1f610.svg").url.get"> Je ne sais pas</th>
                            <th><img class="usefulness__icon" src="@webJarsUtil.locate("1f61e.svg").url.get"> Non</th>
                            <th>?</th>
                            </tr>
                    </thead>
                    <tbody>
                    @for((month, applications) <- areaData.closedApplicationsPerMonth.reverse) {
                        <tr class="application-row">
                            <td class="mdl-data-table__cell--non-numeric">@months(month) (@month)</td>
                            <td>@applications.length</td>
                            <td class="mdl-color-text--red mdl-typography--font-bold">@applications.count(_.irrelevant)</td>
                            <td>@applications.count(_.usefulness.contains("Oui")) <img class="usefulness__icon" src="@webJarsUtil.locate("1f600.svg").url.get"></td>
                            <td>@applications.count(_.usefulness.contains("Je ne sais pas")) <img class="usefulness__icon" src="@webJarsUtil.locate("1f610.svg").url.get"></td>
                            <td>@applications.count(_.usefulness.contains("Non")) <img class="usefulness__icon" src="@webJarsUtil.locate("1f61e.svg").url.get"></td>
                            <td>@applications.count(_.usefulness.isEmpty) ?</td>
                        </tr>
                    }
                    </tbody>
                    </table>
                   </details>
                </div>
        }
    </div>
    }
