@import models._
@import extentions.MDLForms._
@(currentUser: User)(form: Form[(String, java.util.UUID, String)])(implicit webJarsUtil: org.webjars.play.WebJarsUtil, flash: Flash, request: RequestHeader, messagesProvider: MessagesProvider)

@main(currentUser)(s"Importer des utilisateurs") {
    <link rel="stylesheet" media="screen,print" href='@routes.Assets.versioned("stylesheets/newForm.css")'>
} {

    <div class="mdl-cell mdl-cell--12-col mdl-grid--no-spacing">
        @helper.form(routes.UserController.importUsersReview(), 'method -> "post") {
            @helper.CSRF.formField
            <h2 class="mdl-cell mdl-cell--12-col">Importer un contenu CSV</h2>
            <div>
                <em>Séparateur</em>
                <input type="radio" name="separator" value=";" id="semicolon" checked><label for="semicolon">Point-virgule</label>
                <input type="radio" name="separator" value="," id="comma"><label for="comma">Virgule</label>
            </div>
            <div>
                <em>Département : </em>
                <select id="area-selector" name="area-selector">
                    <option value="@Area.notApplicable">Choisissez</option>
                    @for(area <- currentUser.areas.flatMap(Area.fromId)) {
                    <option value="@area.id">@area.name</option>
                    }
                </select>
            </div>
            <p>@csv.USER_HEADER@csv.SEPARATOR@csv.GROUP_HEADER</p>
            @if(form.errors.nonEmpty) {
                <div style="color: red; font-weight: bold;">@form.errors.map(_.message)</div>
            }
            <textarea label="Contenu du CSV"
                      class="mdl-textfield--floating-label mdl-cell mdl-cell--12-col mdl-color--white .mdl-textarea--more-height"
                      rows= "20"
                      name="csv-import-content"
                      id="csv-import-content">@form("csv-import-content").value</textarea>

            <button class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-cell mdl-cell--10-col mdl-cell--1-offset">
                    Prévisualiser l'importation d'utilisateurs
            </button>
        }
    </div>
}